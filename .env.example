# Current configuration is default values, please modify as needed

# Server listening IP (subject to actual value)
HOST=

# Server listening port
PORT=3000

# Route prefix, must start with / (if not empty) (deprecated, use route_registry.json to define)
# ROUTE_PREFIX=

# Highest privilege authentication token, required
AUTH_TOKEN=

# Authentication token for sharing, only Chat endpoint permission (polling not synced with AUTH_TOKEN), no other permissions (migrated)
# SHARED_TOKEN=

# Enable stream response check, if disabled cannot respond to errors, cost is parsing first chunk twice (deprecated)
# New version has completed optimization
# ENABLE_STREAM_CHECK=true

# Send empty message chunk with "finish_reason" as "stop" after stream message ends (deprecated)
# INCLUDE_STOP_REASON_STREAM=true

# Token file path (deprecated)
# TOKEN_FILE=.token

# Token list file path (deprecated)
# TOKEN_LIST_FILE=.tokens

# Whether to enable slow pool (true/false) (ineffective) (migrated)
# ENABLE_SLOW_POOL=false

# Allow claude-prefixed model requests to bypass built-in model restrictions (true/false) (deprecated)
# PASS_ANY_CLAUDE=false

# Whether to enable long context mode (true/false) (migrated)
# ENABLE_LONG_CONTEXT=false

# Image processing capability configuration (migrated)
# Options:
# - none or disabled: Disable image functionality
# - base64 or base64-only: Only support base64 encoded images
# - all or base64-http: Support base64 and HTTP images
#   Note: Enabling HTTP support may expose server IP
# VISION_ABILITY=base64

# Usage check configuration (migrated)
# Options:
# - none or disabled: Disable usage check
# - default: See README for details
# - all or everything: Unconditional usage check
# - Comma-separated model list, uses default when empty
# USAGE_CHECK=default

# Whether to allow dynamic (custom) configured API Key (deprecated)
# DYNAMIC_KEY=false

# Security verification key for dynamic key functionality (migrated)
# Purpose: Verify the legitimacy of key configuration request source (prevent malicious add/modify)
# Empty: Automatically disable dynamic key functionality
# Format:
#   1. Raw key mode (recommended):
#      Starts with "hex:", followed by 64 to 128 hexadecimal characters.
#      - Length must be >= 64 characters (i.e., at least 32 bytes entropy).
#      - Recommended to use 128 characters to fill 64-byte key space.
#      Example: DYNAMIC_KEY_SECRET=hex:a1b2...
#   2. Password hash mode:
#      If no prefix or length less than 64 characters, SHA256 hash of the string will be calculated as key.
# Generate: openssl rand -hex 64
# DYNAMIC_KEY_SECRET=

# Dynamic Key identifier prefix
KEY_PREFIX=sk-

# Default prompt
# Use a single space for no default prompt
# Placeholder: All {{currentDateTime}} will be automatically replaced with current time in RFC3339 standard
DEFAULT_INSTRUCTIONS="Respond in English by default"

# Private reverse proxy server hostname
PRI_REVERSE_PROXY_HOST=

# Public reverse proxy server hostname
PUB_REVERSE_PROXY_HOST=

# Proxy address configuration (deprecated)
# - Format: name=url, e.g., work=http://localhost:7890
# - Reserved values:
#   - `no` or empty: Do not use any proxy
#   - `system` or `default`: Use system proxy
# - Support renaming reserved values, e.g., my_no=no
# - Proxy address supports the following formats:
#   - http://localhost:7890
#   - socks5://username:password@localhost:1080
#   - Supported protocols: http, https, socks4, socks5, socks5h
# - Multiple configurations separated by commas, e.g.:
#   my_proxy=http://localhost:7890,work=socks5://localhost:1080,offline=no
# Note:
# - Same proxy address will share the same client instance
# - First valid proxy will be used as default proxy
# - Reserved values (no, system, etc.) cannot be used as proxy names
# - Please set this in /config
# PROXIES=system

# Request body size limit (in bytes)
# Default is 2MB (2,000,000 bytes)
REQUEST_BODY_LIMIT=2000000

# Delimiter for token and checksum in OpenAI requests (deprecated)
# TOKEN_DELIMITER=,

# Also compatible with default , as delimiter (deprecated)
# USE_COMMA_DELIMITER=true

# Debug
DEBUG=true

# Debug file
DEBUG_LOG_FILE=debug.log

# Log storage count (max 100000) (0 means no logs, 100000 means unlimited, but log file limit is 8EB=8192PB=8388608TB, in case you don't understand, provided your memory is large enough)
REQUEST_LOGS_LIMIT=100

# How long connection is idle before sending probe packets (seconds) (max 600)
TCP_KEEPALIVE=60

# Probe packet sending interval (seconds) (max 600)
# Should not be greater than TCP_KEEPALIVE
TCP_KEEPALIVE_INTERVAL=15

# Maximum retry count after probe failure (max 20)
TCP_KEEPALIVE_RETRIES=5

HTTP2_ADAPTIVE_WINDOW=true
HTTP2_KEEP_ALIVE_INTERVAL=30
HTTP2_KEEP_ALIVE_TIMEOUT=20
HTTP2_KEEP_ALIVE_WHILE_IDLE=true

# Service request timeout (seconds) (max 600)
SERVICE_TIMEOUT=30

# Include web references (migrated)
# INCLUDE_WEB_REFERENCES=false

# Persistent log file path (deprecated)
# LOGS_FILE_PATH=logs.bin

# Persistent page config file path (deprecated)
# PAGES_FILE_PATH=pages.bin

# Program data directory
DATA_DIR=data

# General timezone header, format is timezone identifier like America/Los_Angeles
GENERAL_TIMEZONE=Europe/Istanbul

# Consecutive empty stream threshold, disconnect after reaching this value (default 10) (deprecated)
# MAX_EMPTY_STREAM_COUNT=10

# Use embedded Claude.ai official prompt as default prompt, if model starts with claude- priority is higher than DEFAULT_INSTRUCTIONS (deprecated)
# USE_OFFICIAL_CLAUDE_PROMPTS=false

# Disable HTTP2
# DISABLE_HTTP2=false

# Cursor client version (deprecated)
# CURSOR_CLIENT_VERSION=2.0.0

# Thinking tag (deprecated)
# THINKING_TAG=think

# Real usage, otherwise all zeros
REAL_USAGE=true

# Safe hash, hash generation is slower, related to 30000 seconds update client key and generate checksum
SAFE_HASH=true

# Model data fetch mode (migrated)
# - Options:
#   - truncate        - Overwrite mode (default): Completely use newly fetched model list, replace all existing models
#   - append:truncate - Smart merge mode:         Keep existing models not in new list, while adding or updating new models
#   - append          - Pure append mode:         Only add non-existing new models, existing models remain unchanged
# FETCH_RAW_MODELS=truncate

# Default code completion region (corresponds to gcpp_host key in token tags)
# - Options:
#   - us-asia.gcpp.cursor.sh | Asia - Closer to Asia nodes
#   - us-eu.gcpp.cursor.sh   | EU   - Closer to Europe nodes
#   - us-only.gcpp.cursor.sh | US   - Closer to US nodes
GENERAL_GCPP_HOST=EU

# Short-lived token validity period (seconds) (deprecated)
# Web
# Format: Single number or range (e.g., "3600" or "3600-5400")
# Example: 5400 means token validity is 1.5 hours
# TOKEN_SHORT_VALIDITY=5400

# Long-lived token validity period (seconds) (deprecated)
# Session
# Format: Single number or range (e.g., "86400" or "86400-5184000")
# Example: 5184000 means token validity is 60 days
# TOKEN_LONG_VALIDITY=5184000

# Allowed token providers
ALLOWED_PROVIDERS=auth0,google-oauth2,github

# Bypass model validation, allow all models (with some performance loss)
BYPASS_MODEL_VALIDATION=false

# Request model unique identifier source
# - Options:
#   - id
#   - client_id
#   - server_id
MODEL_ID_SOURCE=server_id

# Context fill mode
# - Options:
#   - context: 1                              # Use current context only
#   - repo_context: 2                         # Use repository context only
#   - context + repo_context: 3               # Current context + repository context
#   - mode_specific_context: 4                # Mode specific context
#   - context + mode_specific_context: 5      # Current context + mode specific context
#   - repo_context + mode_specific_context: 6 # Repository context + mode specific context
#   - all_contexts: 7                         # All context combinations
CONTEXT_FILL_MODE=1

# Frontend resource path
# Actually defines route_registry.json
FRONTEND_PATH=frontend.zip

# NTP server list (comma separated)
# Leave empty to completely disable NTP time sync functionality
# Example: pool.ntp.org,time.cloudflare.com,time.windows.com
NTP_SERVERS=time.cloudflare.com

# NTP periodic sync interval (seconds)
# Only effective when servers are configured
# 0 or not set means sync only once at startup (no background task)
NTP_SYNC_INTERVAL_SECS=3600

# Sample count per sync
# Multiple samples can improve accuracy but increase sync time
# Minimum available value is 3
NTP_SAMPLE_COUNT=8

# Sample interval (milliseconds)
# Wait time between two samples
# Too small may cause network congestion, too large will extend sync time
NTP_SAMPLE_INTERVAL_MS=50

# Expected peak rate
# RPS: Requests per second
LOG_PEAK_RPS=25

# Expected buffer duration
# Expected blocking delay time when not dropping logs
LOG_BUFFER_SECONDS=2

# Drop logs on overload (not implemented)
# LOG_DROP_ON_OVERLOAD=false

# Runtime display format
# Options:
#   - auto      : Auto select format
#   - compact   : Compact format (e.g.: 1h30m)
#   - standard  : Standard format (e.g.: 1 hour 30 minutes)
#   - detailed  : Detailed format (e.g.: 1 hour, 30 minutes, 5 seconds)
#   - iso8601   : ISO 8601 format (e.g.: PT1H30M5S)
#   - fuzzy     : Fuzzy format (e.g.: about an hour)
#   - numeric   : Pure numeric format (e.g.: 5405)
#   - verbose   : Verbose format (e.g.: 1 hour and 30 minutes)
#   - random    : Random format (for testing only)
DURATION_FORMAT=random

# Runtime display language
# Options:
#   - english   : English
#   - chinese   : Chinese
#   - japanese  : Japanese
#   - spanish   : Spanish
#   - german    : German
#   - random    : Random language (for testing only)
DURATION_LANGUAGE=random

# Config file path
CONFIG_FILE=config.toml
