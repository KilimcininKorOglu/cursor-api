{
    "$schema": "http://json-schema.org/draft-07/schema#",
    "$id": "https://example.com/schemas/route-registry.json",
    "title": "Route Registry",
    "description": "Frontend resource route registry, defines URL path to resource mapping",
    "type": "object",
    "properties": {
        "name": {
            "type": "string",
            "description": "Frontend package name",
            "examples": [
                "my-frontend-app"
            ]
        },
        "version": {
            "type": "string",
            "description": "Version number (recommended to follow Semantic Versioning)",
            "pattern": "^\\d+\\.\\d+\\.\\d+(-[a-zA-Z0-9.-]+)?(\\+[a-zA-Z0-9.-]+)?$",
            "examples": [
                "1.0.0",
                "2.1.3-beta.1"
            ]
        },
        "description": {
            "type": "string",
            "description": "Frontend package description",
            "examples": [
                "Modern web application frontend"
            ]
        },
        "author": {
            "type": "string",
            "description": "Author information",
            "examples": [
                "John Doe <john@example.com>"
            ]
        },
        "license": {
            "type": "string",
            "description": "License type",
            "examples": [
                "MIT",
                "Apache-2.0",
                "GPL-3.0"
            ]
        },
        "routes": {
            "type": "object",
            "description": "Route mapping table, key is URL path, value is route definition",
            "additionalProperties": {
                "$ref": "#/definitions/RouteDefinition"
            },
            "examples": [
                {
                    "/": "index.html",
                    "/app.js": "dist/app.js",
                    "/api": {
                        "type": "file",
                        "path": "api.json",
                        "content_type": "application/json"
                    }
                }
            ]
        }
    },
    "required": [
        "routes"
    ],
    "additionalProperties": false,
    "definitions": {
        "RouteDefinition": {
            "title": "Route Definition",
            "description": "Route definition, supports shorthand (string) and full format (object)",
            "oneOf": [
                {
                    "type": "string",
                    "description": "Shorthand format: directly specify file path, automatically creates File type route",
                    "examples": [
                        "index.html",
                        "dist/app.js",
                        "assets/logo.png"
                    ]
                },
                {
                    "$ref": "#/definitions/RouteDef"
                }
            ]
        },
        "RouteDef": {
            "title": "Route Definition Object",
            "description": "Full route definition object",
            "type": "object",
            "oneOf": [
                {
                    "$ref": "#/definitions/FileRoute"
                },
                {
                    "$ref": "#/definitions/EmptyRoute"
                },
                {
                    "$ref": "#/definitions/ExchangeRoute"
                }
            ]
        },
        "FileRoute": {
            "title": "File Route",
            "description": "File route: returns static file content",
            "type": "object",
            "properties": {
                "type": {
                    "type": "string",
                    "const": "file",
                    "description": "Route type identifier"
                },
                "path": {
                    "type": "string",
                    "description": "File relative path (relative to resource package root directory)",
                    "examples": [
                        "index.html",
                        "assets/app.js",
                        "dist/bundle.min.js"
                    ]
                },
                "content_type": {
                    "type": "string",
                    "description": "HTTP Content-Type response header (optional, inferred from file extension if not specified)",
                    "enum": [
                        "text_html_utf8",
                        "text_plain_utf8",
                        "text_css_utf8",
                        "application_javascript_utf8",
                        "text_csv_utf8",
                        "text_xml_utf8",
                        "text_markdown_utf8",
                        "image_jpeg",
                        "image_png",
                        "image_gif",
                        "image_webp",
                        "image_svg_xml",
                        "image_bmp",
                        "image_ico",
                        "image_tiff",
                        "image_avif",
                        "audio_mpeg",
                        "audio_mp4",
                        "audio_wav",
                        "audio_ogg",
                        "audio_webm",
                        "audio_aac",
                        "audio_flac",
                        "audio_m4a",
                        "video_mp4",
                        "video_mpeg",
                        "video_webm",
                        "video_ogg",
                        "video_avi",
                        "video_quicktime",
                        "video_x_flv",
                        "application_pdf",
                        "application_msword",
                        "application_word_docx",
                        "application_excel_xls",
                        "application_excel_xlsx",
                        "application_powerpoint_ppt",
                        "application_powerpoint_pptx",
                        "application_zip",
                        "application_rar",
                        "application_7z",
                        "application_gzip",
                        "application_tar",
                        "font_ttf",
                        "font_otf",
                        "font_woff",
                        "font_woff2",
                        "application_octet_stream"
                    ],
                    "examples": [
                        "text_html_utf8",
                        "application_javascript_utf8",
                        "image_png",
                        "application_json"
                    ]
                }
            },
            "required": [
                "type",
                "path"
            ],
            "additionalProperties": false
        },
        "EmptyRoute": {
            "title": "Empty Route",
            "description": "Empty response route: returns response with only status code and headers (no body), commonly used for redirects, CORS preflight, etc.",
            "type": "object",
            "properties": {
                "type": {
                    "type": "string",
                    "const": "empty",
                    "description": "Route type identifier"
                },
                "status": {
                    "type": "integer",
                    "description": "HTTP status code",
                    "minimum": 100,
                    "maximum": 999,
                    "examples": [
                        200,
                        301,
                        302,
                        304,
                        404
                    ]
                },
                "headers": {
                    "type": "array",
                    "description": "Response headers list",
                    "items": {
                        "$ref": "#/definitions/Header"
                    },
                    "examples": [
                        [
                            [
                                "Location",
                                "https://example.com"
                            ]
                        ],
                        [
                            [
                                "Access-Control-Allow-Origin",
                                "*"
                            ],
                            [
                                "Access-Control-Allow-Methods",
                                "GET, POST"
                            ]
                        ]
                    ]
                }
            },
            "required": [
                "type",
                "status",
                "headers"
            ],
            "additionalProperties": false
        },
        "ExchangeRoute": {
            "title": "Exchange Route",
            "description": "Exchange built-in route",
            "type": "object",
            "properties": {
                "type": {
                    "type": "string",
                    "const": "exchange",
                    "description": "Route type identifier"
                },
                "from": {
                    "type": "string",
                    "description": "Original route path",
                    "examples": [
                        "/env-example",
                        "/readme"
                    ]
                }
            },
            "required": [
                "type",
                "from"
            ],
            "additionalProperties": false
        },
        "Header": {
            "title": "HTTP Header",
            "description": "HTTP response header key-value pair",
            "type": "array",
            "items": [
                {
                    "type": "string",
                    "description": "Header name (compliant with HTTP specification)",
                    "pattern": "^[!#$%&'*+\\-.0-9A-Z^_`a-z|~]+$",
                    "examples": [
                        "Content-Type",
                        "Location",
                        "Cache-Control"
                    ]
                },
                {
                    "type": "string",
                    "description": "Header value (printable ASCII characters)",
                    "examples": [
                        "application/json",
                        "https://example.com",
                        "max-age=3600"
                    ]
                }
            ],
            "minItems": 2,
            "maxItems": 2
        }
    },
    "examples": [
        {
            "name": "example-frontend",
            "version": "1.0.0",
            "description": "Example frontend application",
            "author": "Developer Team",
            "license": "MIT",
            "routes": {
                "/": "index.html",
                "/app.js": "dist/app.js",
                "/style.css": "dist/style.css",
                "/api/config.json": {
                    "type": "file",
                    "path": "config/api.json",
                    "content_type": "application/json"
                },
                "/redirect": {
                    "type": "empty",
                    "status": 301,
                    "headers": [
                        [
                            "Location",
                            "https://example.com"
                        ]
                    ]
                },
                "/cors-preflight": {
                    "type": "empty",
                    "status": 204,
                    "headers": [
                        [
                            "Access-Control-Allow-Origin",
                            "*"
                        ],
                        [
                            "Access-Control-Allow-Methods",
                            "GET, POST, PUT, DELETE"
                        ],
                        [
                            "Access-Control-Max-Age",
                            "86400"
                        ]
                    ]
                }
            }
        }
    ]
}